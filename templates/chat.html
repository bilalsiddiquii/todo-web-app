<!DOCTYPE html>
<html>
<head>
    <title>Chat</title>
    <style>
        body { font-family: sans-serif; padding: 40px; background-color: #fff0f0; }
        #chat-box { max-width: 600px; margin: auto; border: 1px solid #e63946; padding: 20px; border-radius: 10px; background-color: white; }
        .message { margin-bottom: 15px; }
        .user { color: #1d3557; font-weight: bold; }
        .bot { color: #e63946; }
        textarea { width: 100%; padding: 10px; border: 1px solid #e63946; border-radius: 5px; margin-top: 10px; }
        button { background: #e63946; color: white; padding: 10px 20px; border: none; border-radius: 5px; margin-top: 10px; cursor: pointer; }
        button:hover { background: #d62839; }
        .top-links { display: flex; justify-content: space-between; margin-bottom: 20px; }
        .top-links a { text-decoration: none; color: #e63946; font-weight: bold; }
    </style>
</head>
<body>
    <div id="chat-box">
        <div class="top-links">
            <div><strong>{{ mode if mode != 'assistant' else 'Default Assistant' }}</strong></div>
            <div><a href="/custom">âœ¨ Create Your Own Agent</a></div>
        </div>
        <div id="messages"></div>
        <textarea id="user-input" placeholder="Type your message..."></textarea>
        <button onclick="sendMessage()">Send</button>
    </div>

    <script>
        async function sendMessage() {
            const userInput = document.getElementById("user-input").value;
            if (!userInput.trim()) return;

            const messagesDiv = document.getElementById("messages");
            messagesDiv.innerHTML += `<div class='message user'>You: ${userInput}</div>`;
            document.getElementById("user-input").value = "";

            const res = await fetch("/chat?mode={{ 'custom' if mode != 'assistant' and mode != None else 'assistant' }}", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ message: userInput })
            });

            const data = await res.json();
            messagesDiv.innerHTML += `<div class='message bot'>Bot: ${data.reply}</div>`;
        }
    </script>
</body>
</html>
